<div class="register-container">
    <img src="assets/img/smartchef-logo.png" alt="SmartChef Logo" class="logo" />

    <div class="form-box">
        <h2>Hello!</h2>

        <form [formGroup]="form" (ngSubmit)="onRegister()">
            <div class="form-row">
                <label for="username">Username</label>
                <input id="username" formControlName="username" type="text" required />
                <div class="error" *ngIf="form.get('username')?.touched || form.get('username')?.errors?.['usernameTaken']">
                    <small *ngIf="form.get('username')?.errors?.['required']">Username is required.</small>
                    <small *ngIf="form.get('username')?.errors?.['usernameTaken']">Username already exists.</small>
                </div>
            </div>
            
            <div class="form-row">
                <label for="email">Email</label>
                <input id="email" formControlName="email" type="email" required />
                <div class="error" *ngIf="form.get('email')?.touched || form.get('email')?.errors?.['emailTaken']">
                    <small *ngIf="form.get('email')?.errors?.['required']">Email is required.</small>
                    <small *ngIf="form.get('email')?.errors?.['email']">Invalid email format.</small>
                    <small *ngIf="form.get('email')?.errors?.['invalidDomain']">Use a valid domain.</small>
                    <small *ngIf="form.get('email')?.errors?.['emailTaken']">Email already exists.</small>
                </div>
            </div>
  

            <div class="form-row">
                <label for="country">Country</label>
                <select id="country" formControlName="country" required>
                    <option [ngValue]="null" disabled>Select a country</option>
                    <option *ngFor="let c of countries" [value]="c">{{ c }}</option>
                </select>
            </div>

            <div class="form-row checkbox-row">
                <label>
                    <input type="checkbox" formControlName="isPublic" />
                    Public account?
                </label>
            </div>

            <div class="form-row">
                <label for="password">Password</label>
                <div class="password-field">
                    <input [type]="showPassword ? 'text' : 'password'" id="password" formControlName="password"
                        placeholder="Password..." required />
                    <button type="button" (click)="togglePasswordVisibility()" class="eye-button">
                        <mat-icon>{{ showPassword ? 'visibility_off' : 'visibility' }}</mat-icon>
                    </button>
                </div>
                <div class="error" *ngIf="form.get('password')?.touched && form.get('password')?.invalid">
                    <small *ngIf="form.get('password')?.errors?.['required']">Password is required.</small>
                    <small *ngIf="form.get('password')?.errors?.['minlength']">Min. 6 characters.</small>
                    <small *ngIf="form.get('password')?.errors?.['doesNotContainSpecialCharacter']">
                        Special character required.
                    </small>
                </div>
            </div>
            
            <div class="form-row">
                <label for="confirmPassword">Confirm Password</label>
                <div class="password-field">
                    <input [type]="showPassword ? 'text' : 'password'" id="confirmPassword" formControlName="confirmPassword"
                        placeholder="Confirm password..." required />
                    <button type="button" (click)="togglePasswordVisibility()" class="eye-button">
                        <mat-icon>{{ showPassword ? 'visibility_off' : 'visibility' }}</mat-icon>
                    </button>
                </div>
                <div class="error" *ngIf="form.get('confirmPassword')?.touched && form.hasError('passwordMismatch')">
                    <small>Passwords do not match.</small>
                </div>
            </div>                          

            <button class="btn-primary full-width" type="submit" [disabled]="form.invalid">Register</button>

            <p class="small-text">
                Already on SmartChef? <a routerLink="/login">Login here!</a>
            </p>
        </form>
    </div>
</div>
  